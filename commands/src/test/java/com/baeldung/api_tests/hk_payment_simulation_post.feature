# ********RoostGPT********

# Test generated by RoostGPT for test MiniProjects using AI Type Open AI and AI Model gpt-4-1106-preview
# 
# Feature file generated for /hk/payment/simulation_post for http method type POST 
# RoostTestHash=04b1903adc
# 
# 

# ********RoostGPT********
Feature: Hong Kong FPS Payment Simulation API

Background: 
  * def urlBase = karate.properties['url.base'] || karate.get('urlBase', 'http://localhost:8080')
  * url urlBase
  * def authToken = karate.properties['AUTH_TOKEN']
  * def contentType = 'application/json'
  * def messageEncrypt = false

Scenario Outline: Test Hong Kong FPS Payment Simulation API - <PaymentType>
  Given path '/hk/payment/simulation'
  And header Authorization = 'Bearer ' + authToken
  And header Content-Type = contentType
  And header message_encrypt = messageEncrypt
  And request 
  """
  <RequestBody>
  """
  When method post
  Then status 200
  And match response contains 
  """
  { 
    api_gw: { messageId: '#string', returnCode: '200', returnReason: '#string', sentTime: '#string', responseTime: '#string' },
    response: { txnRef: '#string', proCode: '#string', proMsg: '#string', currency: '#string' }
  }
  """

  Examples: 
    | PaymentType               | RequestBody                                                                                                                                                                                                                           |
    | Hong Kong Bill Payment    | { "txnRef": "0002900F06457710500000001", "merId": "H099289H4410000", "is_notification_encrypted": "Y", "for_bill_payment": { "currency": "HKD", "amount": 2500, "suppInfo": "Supplementary Information" } }           |
    | Hong Kong Non-bill Payment | { "txnRef": "0002900F06457710500000001", "merId": "H099289H4410000", "is_notification_encrypted": "Y", "for_nonbill_payment": { "currency": "HKD", "amount": 2500, "suppInfo": "Supplementary Information" } } |

Scenario: Test Hong Kong FPS Payment Simulation API with invalid authorization
  Given path '/hk/payment/simulation'
  And header Authorization = 'InvalidToken'
  And header Content-Type = contentType
  And header message_encrypt = messageEncrypt
  And request 
  """
  { "txnRef": "0002900F06457710500000001", "merId": "H099289H4410000", "is_notification_encrypted": "Y", "for_bill_payment": { "currency": "HKD", "amount": 2500, "suppInfo": "Supplementary Information" } }
  """
  When method post
  Then status 403

Scenario: Test Hong Kong FPS Payment Simulation API with bad request
  Given path '/hk/payment/simulation'
  And header Authorization = 'Bearer ' + authToken
  And header Content-Type = contentType
  And header message_encrypt = messageEncrypt
  And request 
  """
  { "txnRef": "", "merId": "", "is_notification_encrypted": "Y", "for_bill_payment": { "currency": "HKD", "amount": 2500, "suppInfo": "Supplementary Information" } }
  """
  When method post
  Then status 400

Scenario: Test Hong Kong FPS Payment Simulation API with server error
  Given path '/hk/payment/simulation'
  And header Authorization = 'Bearer ' + authToken
  And header Content-Type = contentType
  And header message_encrypt = messageEncrypt
  And request 
  """
  { "txnRef": "0002900F06457710500000002", "merId": "H099289H4410001", "is_notification_encrypted": "N", "for_bill_payment": { "currency": "CNY", "amount": 100, "suppInfo": "Error Simulation" } }
  """
  When method post
  Then status 500
