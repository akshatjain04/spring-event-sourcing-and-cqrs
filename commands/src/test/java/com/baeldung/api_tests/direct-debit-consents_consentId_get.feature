# ********RoostGPT********

# Test generated by RoostGPT for test MiniProjects using AI Type Open AI and AI Model gpt-4-1106-preview
# 
# Feature file generated for /direct-debit-consents/{consentId}_get for http method type GET 
# RoostTestHash=296226bc11
# 
# 

# ********RoostGPT********
Feature: Real-time Direct Debit Consent Setup

Background:
  * def urlBase = karate.properties['url.base'] || karate.get('urlBase', 'http://localhost:8080')
  * url urlBase
  * def authToken = karate.properties['AUTH_TOKEN']
  * header Authorization = 'Bearer ' + authToken
  * header x-fapi-auth-date = 'Sun, 10 Sep 2017 19:43:31 UTC'
  * header x-fapi-customer-ip-address = '169.254.169.254'
  * header x-fapi-interaction-id = 'unique-id-0001'
  * header Accept-Language = 'en-HK'

Scenario Outline: Retrieve Direct Debit Consent with valid ConsentId
  Given path 'direct-debit-consents', <consentId>
  When method get
  Then status 200
  And match response contains { data: '#object' }
  And match response.data.consentId == <consentId>
  And match response.data contains { creationDate: '#string', status: '#string', statusUpdateDate: '#string', permissions: '#array' }
  And match response.headers contains { 'x-fapi-interaction-id': '#string' }

  Examples:
    | consentId                               |
    | '7404e99b-1a4d-4b08-b441-c327661527f0' |

Scenario: Retrieve Direct Debit Consent with invalid ConsentId
  Given path 'direct-debit-consents', 'invalid-consent-id'
  When method get
  Then status 400
  And match response contains { errors: '#array' }

Scenario: Retrieve Direct Debit Consent with expired token
  * header Authorization = 'Bearer expired-token'
  Given path 'direct-debit-consents', '7404e99b-1a4d-4b08-b441-c327661527f0'
  When method get
  Then status 401

Scenario: Retrieve Direct Debit Consent with insufficient permissions
  Given path 'direct-debit-consents', '7404e99b-1a4d-4b08-b441-c327661527f0'
  When method get
  Then status 403

Scenario: Retrieve Direct Debit Consent with wrong HTTP method
  Given path 'direct-debit-consents', '7404e99b-1a4d-4b08-b441-c327661527f0'
  When method post
  Then status 405

Scenario: Retrieve Direct Debit Consent with unsupported Accept-Language
  * header Accept-Language = 'unsupported-language'
  Given path 'direct-debit-consents', '7404e99b-1a4d-4b08-b441-c327661527f0'
  When method get
  Then status 406

Scenario: Retrieve Direct Debit Consent when service is unavailable
  Given path 'direct-debit-consents', '7404e99b-1a4d-4b08-b441-c327661527f0'
  When method get
  Then status 503

Scenario: Retrieve Direct Debit Consent with gateway timeout
  Given path 'direct-debit-consents', '7404e99b-1a4d-4b08-b441-c327661527f0'
  When method get
  Then status 504
