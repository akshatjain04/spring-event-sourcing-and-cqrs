# ********RoostGPT********

# Test generated by RoostGPT for test MiniProjects using AI Type Open AI and AI Model gpt-4-1106-preview
# 
# Feature file generated for /direct-debit-consents/{consentId}_get for http method type GET 
# RoostTestHash=296226bc11
# 
# 

# ********RoostGPT********
Feature: Real-time Direct Debit Consent Setup

Background:
  * def urlBase = karate.properties['url.base'] || karate.get('urlBase', 'http://localhost:8080')
  * url urlBase
  * def authToken = karate.properties['AUTH_TOKEN']

Scenario Outline: Retrieve direct-debit consent resource with valid consentId
  Given path 'direct-debit-consents/', <consentId>
  And header Authorization = 'Bearer ' + authToken
  And header x-fapi-auth-date = <x_fapi_auth_date>
  And header x-fapi-customer-ip-address = <x_fapi_customer_ip_address>
  And header x-fapi-interaction-id = <x_fapi_interaction_id>
  And header Accept-Language = <accept_language>
  When method GET
  Then status 200
  And match response.data.consentId == <consentId>
  And match response.data.creationDate contains <creationDate>
  And match response.data.status == '#(status)'
  And match response.data.statusUpdateDate contains <statusUpdateDate>
  And match each response.data.permissions contains only '#(permissions)'
  And match response.links.self contains <selfLink>

Examples:
  | consentId                              | x_fapi_auth_date              | x_fapi_customer_ip_address | x_fapi_interaction_id       | accept_language | creationDate              | statusUpdateDate           | selfLink                | status               | permissions                                                                                          |
  | '7404e99b-1a4d-4b08-b441-c327661527f0' | 'Sun, 10 Sep 2017 19:43:31 UTC' | '169.254.169.254'          | 'unique-correlation-id-12345' | 'en-HK'         | '2017-04-05T10:43:07+00:00' | '2017-04-05T10:43:07+00:00' | 'http://example.com/self' | 'PendingAuthorise' | ['RealTimeDirectDebitSetup', 'RealTimeDirectDebitOtpConfirmation', 'RealTimeDirectDebitOtpRegeneration', 'RealTimeDirectDebitStatusAuthorisations', 'RealTimeDirectDebitInstructions', 'RealTimeDirectDebitStatusInstructions', 'RealTimeDirectDebitReporting'] |

Scenario Outline: Retrieve direct-debit consent resource with invalid consentId
  Given path 'direct-debit-consents/', <consentId>
  And header Authorization = 'Bearer ' + authToken
  When method GET
  Then status 400
  And match response.errors[0].code is not null
  And match response.errors[0].causes contains <errorCause>

Examples:
  | consentId | errorCause                       |
  | 'invalid' | 'A mandatory field is missing'   |

Scenario: Retrieve direct-debit consent resource without authorization
  Given path 'direct-debit-consents/7404e99b-1a4d-4b08-b441-c327661527f0'
  When method GET
  Then status 401

Scenario: Retrieve direct-debit consent resource with forbidden access
  Given path 'direct-debit-consents/7404e99b-1a4d-4b08-b441-c327661527f0'
  And header Authorization = 'Bearer ' + authToken
  When method GET
  Then status 403

Scenario: Attempt to use an unsupported method on the direct-debit consent resource
  Given path 'direct-debit-consents/7404e99b-1a4d-4b08-b441-c327661527f0'
  And header Authorization = 'Bearer ' + authToken
  When method POST
  Then status 405

Scenario: Retrieve direct-debit consent resource when the server is unavailable
  Given path 'direct-debit-consents/7404e99b-1a4d-4b08-b441-c327661527f0'
  And header Authorization = 'Bearer ' + authToken
  When method GET
  Then status 503

Scenario: Retrieve direct-debit consent resource when there is a gateway timeout
  Given path 'direct-debit-consents/7404e99b-1a4d-4b08-b441-c327661527f0'
  And header Authorization = 'Bearer ' + authToken
  When method GET
  Then status 504
